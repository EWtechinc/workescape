<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Cuprum|EB+Garamond|Euphoria+Script|Nunito" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="ewlogo.jpg" />
</head>

<style>
  c {
    font-family: 'Euphoria Script', cursive;
    font-size: 500%;
    font-weight: bold;
  }
  b {
    font-family: 'EB Garamond', serif;
    font-size: 150%;
  }
  p {
    font-family: 'Cuprum', sans-serif;
  }

button.accordion {
    background-color: #000033;
    color: white;
    cursor: pointer;
    padding: 18px;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 15px;
    transition: 0.4s;
}

button.accordion.active, button.accordion:hover {
    background-color: #AEB6BF;
}

button.accordion:after {
    content: '\002B';
    color: #777;
    font-weight: bold;
    float: right;
    margin-left: 5px;
}

button.accordion.active:after {
    content: "\2212";
}

div.panel {
    padding: 0 18px;
    background-color: white;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
}

</style>

<script>
function w3_open() {
  document.getElementById("main").style.marginLeft = "25%";
  document.getElementById("mySidebar").style.width = "25%";
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("openNav").style.display = 'none';
}
function w3_close() {
  document.getElementById("main").style.marginLeft = "0%";
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("openNav").style.display = "inline-block";
}
</script>

<body bgcolor="C3D2D5">

<title>Work Escape</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="w3-sidebar w3-bar-block w3-black w3-card-2 w3-animate-left" style="display:none" id="mySidebar">
  <b><button class="w3-bar-item w3-button w3-large"
  onclick="w3_close()"><center>MENU &times;</center></button></b>
  <a href="https://ewtechinc.github.io/workescape/home.html" class="w3-bar-item w3-button">
    <center><i class="fa fa-home w3-xxlarge"></i>
    <p>HOME</p></center>
  </a>
  <a href="https://ewtechinc.github.io/workescape/game.html" class="w3-bar-item w3-button">
    <center><i class="fa fa-gamepad w3-xxlarge"></i>
    <p>GAME</p></center>
  </a>
  <a href="https://ewtechinc.github.io/workescape/aboutus.html" class="w3-bar-item w3-button">
    <center><i class="fa fa-user w3-xxlarge"></i>
    <p>ABOUT US</p></center>
  </a>
  <a href="https://ewtechinc.github.io/workescape/contactus.html" class="w3-bar-item w3-button">
    <center><i class="fa fa-address-card w3-xxlarge"></i>
    <p>CONTACT US</p></center>
  </a>
</div>

<div class="w3-main" id="main">
    
   <div class="w3-black">
    <button class="w3-button w3-black w3-xlarge" onclick="w3_open()">&#9776;</button>
    <div class="w3-container">
      <center><a href="https://ewtechinc.github.io/workescape/home.html"><img src="ewlogo.jpg" alt="ewlogo" width="100" height="100" border="0"></a><c>Work Escape</center></c>
    </div>
  </div>

<button class="accordion"><b>Instructions</b></button>
<div class="panel">
  <p>1. Choose your gender to start the game.</p>
  <p>2. When the simulation begins, use the arrow keys to guide your character to one of the coworkers and begin conversations.</p>
  <p>3. The goal of the game is defeat the gender inequality in your workplace, so every time your character stands up for himself/herself instead of succumbing to the mistreatment, you gain a point.If your character fails to stand up for itself 3 out of the 5 total times, you fail; otherwise, you win the game.</p>
  <p>4. If your character fails to stand up for itself 3 out of the 5 total times, you fail; otherwise, you win the game.</p>
  <p><font color=red>Disclaimer: The scenarios that are portrayed in this game are real-life scenarios, meaning that while the examples are specific, gender is still an issue in our societ.
    Our goal is to shed light on the underlying gender issues that occur in the workforce.</font></p>

</div>

<script>
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].onclick = function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.maxHeight){
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    }
  }
}
    
</script>
<style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
    dislay: inline;
    width: 100%;
    text-align: center;
}
</style>
</head>
<script src="javascriptpt3.js"></script>
<body onload="startGame()">
<div style="text-align:center;width:480px;">
  <button type = "button" onclick="gameoption('FEMALE')">FEMALE</button>
  <button type = "button" onclick="gameoption('MALE')">MALE</button>
  <button type = "button" onclick="gameoption('Other')">OTHER</button><br><br>
</div>

<p>Click the button that relates to your gender.</p>
<p>Press Start to begin!</p>

</body>
<script>
var myGamePiece;
var myGameMale1;
var myGameMale2;
var myGameMale3;
var myGameMale4;
var myGameMale5;
var myGameMale6;
var myBackground;
var isitStart = 0;
var canvasW;
var canvasH;
var myGP;

var myGameArea = {
  canvas : document.createElement("canvas"),
  start : function() {
      this.canvas.width = document.body.clientWidth;
      this.canvas.height = this.canvas.width * 0.35;
      canvasW = this.canvas.width;
      canvasH = this.canvas.height;
      this.context = this.canvas.getContext("2d");
      document.body.insertBefore(this.canvas, document.body.childNodes[0]);
      this.frameNo = 0;
      console.log("I am a ready canvas");
      },
  clear : function() {
      this.context = this.canvas.getContext("2d");
      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
  },
  stop : function() {
      clearInterval(this.interval);
  }
};

function startGame(){
  console.log("we've started the game");
  myBackground = new component(canvasW, canvasH, "TitlePage.png", 0, 0, "image");
  updateBackground();
  myGameArea.start();
}


function gameoption(gender)
{
  if (gender == "FEMALE")
  {
    console.log("Entered Female");
    isitStart = 1;
    myBackground = new component(canvasW, canvasH, "office2.jpg", 0, 0, "image");
    console.log("my background is office2");
    updateBackground();
  }
  else if (gender == "MALE") {
    console.log("Entered Male");
    isitStart = 2;
    myBackground = new component(canvasW, canvasH, "hospital.jpg", 0, 0, 'image');
    updateBackground();
  }
  else{
    var choose = Math.random();
    if(choose <= 0.5)
    {
      isitStart = 1;
      myBackground = new component(canvasW, canvasH, "office2.jpg", 0, 0, "image");
      console.log("my background is office2");
      updateBackground();
    }
    else
    {
      console.log("Entered Male");
      isitStart = 2;
      myBackground = new component(canvasW, canvasH, "hospital.jpg", 0, 0, 'image');
      updateBackground();
    }
  }
}

function goToOffice(){
  myGameMale1 = new component(45, 70, "myGameMale1.png", 138, 176, "image");
  myGameMale2 = new component(50, 70, "myGameMale2.png", 138, 257, "image");
  myGameMale3 = new component(60, 70, "myGameMale3.png", 265, 176, "image");
  myGameMale5 = new component(55, 70, "myGameMale4.png", 395, 257, "image");
  myGameMale6 = new component(45, 70, "myGameMale6.png", 395, 176, "image");
  myGamePiece = new component(45, 70, "maincharacter.png", 245, 199, "image");
  couch = new component(120, 130, "couch.png", 640, 110, "image");
  printer = new component(110, 100, "printer.png", 881, 229, "image");

  myGameMale1.update();
  myGameMale3.update();
  myGameMale6.update();
  couch.update();
  myGamePiece.update();
  myGameMale2.update();
  myGameMale5.update();
  printer.update();
//  femalegame();
}

function updateAfterMove(){
  myBackground.update();
  myGameMale1.update();
  myGameMale3.update();
  myGameMale6.update();
  couch.update();
  myGamePiece.update();
  myGameMale2.update();
  myGameMale5.update();
  printer.update();
}

function goToHospital(){

}

function updateBackground() {
  console.log("updating background");
  console.log(isitStart);
  myGameArea.clear();
  if(isitStart == 0) // show office
  {
    console.log("we've entered 0");
    myBackground.update();
  }
  if(isitStart == 1) // start page
  {
    myBackground.update();
    goToOffice();
  }
  if (isitStart == 2) // show hospital
  {
    myBackground.update();
    goToHospital();
  }
}

function femalegame(){

}



function component(width, height, color, x, y, type) {
    this.type = type;
    if (type == "image") {
        this.image = new Image();
        this.image.src = color;
    }
    this.width = width;
    this.height = height;
    this.speedX = 0;
    this.speedY = 0;
    this.x = x;
    this.y = y;
    this.update = function() {
        ctx = myGameArea.context;
        if (type == "image") {
            ctx.drawImage(this.image,
                this.x,
                this.y,
                this.width, this.height);
        }
        else {
            ctx.fillStyle = color;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }
    }
    this.newPos = function() {
        this.x += this.speedX;
        this.y += this.speedY;
    }
}

function moveup() {
    if((myGamePiece.y - 3) > 154)
    {
      myGamePiece.y += -3;
    }
    updateAfterMove();
}

function movedown() {
    if((myGamePiece.y + 3) < canvasH)
    {
      myGamePiece.y += 3;
    }
    updateAfterMove();
}

function moveleft() {
    if((myGamePiece.x - 3) > 0)
    {
      myGamePiece.x += -3;
    }
    updateAfterMove();
}

function moveright() {
    if((myGamePiece.x + 3) < canvasW)
    {
      myGamePiece.x += 3;
    }
    updateAfterMove();
}

function clearmove() {
    myGamePiece.speedX = 0;
    myGamePiece.speedY = 0;
}


window.addEventListener('keydown', function(event) {
  switch (event.keyCode) {
    case 37: // Left
    moveleft();
    console.log("x-pos; " + myGamePiece.x);
    console.log("y-pos; " + myGamePiece.y);
    break;

    case 38: // Up
    moveup();
    console.log("x-pos; " + myGamePiece.x);
    console.log("y-pos; " + myGamePiece.y);
    break;

    case 39: // Right
    moveright();
    console.log("x-pos; " + myGamePiece.x);
    console.log("y-pos; " + myGamePiece.y);
    break;

    case 40: // Down
    movedown();
    console.log("x-pos; " + myGamePiece.x);
    console.log("y-pos; " + myGamePiece.y);
    break;
  }
//  console.log(event.keyCode);
}, false);

</script>

</body>
</html>
